<!--===============CSS参照=============================-->
<link rel="stylesheet" href="portfolio.css">
<!--背景クラス宣言-->
<canvas class="backEfect"></canvas>

<!-- テキスト表示領域 -->
<!-- 自己紹介 -->
<div class="overlay_profile" id="nameSection">
  <div class="overlay__inner">
    <h1 class="overlay__title">
      <span class="text-gradient">Profile</span>
    </h1>
    <p style="text-align:center">
    <div class="c-bnr texturefade">
      <img class="normal-image" src="/sample_00.jpg" alt="Original Image">
      <a href="https://www.youtube.com/channel/UCJSzxbt4Acel9JdeLiY7tJQ">
        <img class="hover-image second-image" src="aseets/texture/YouTube-Icon.jpg" alt="Second Image">
      </a>
      <a href="mailto:mobmob15476@gmail.com">
        <img class="hover-image third-image" src="aseets/texture/gmail_Icon.png" alt="Third Image">
      </a>
     <a href="https://www.instagram.com/type1mob">
      <img class="hover-image forth-image" src="aseets/texture/InstagramIcon.jpeg" alt="forth Image">
     </a>
      
    </div>
    </p>
    <p class="overlay__title">Name:<span class="text-gradient">植松蛍太</span></span></p>
    <!-- 説明 -->
    <ul class="overlay__description">
      <li>高校生からプログラムを始め、<strong>HAL大阪に入学後に本格的にプログラムを触るようになりました。</strong></li>
      <li><strong>誰が見ても分かりやすい読みやすいコードを意識</strong>して制作に取り組んでいます。</li>
      <li><strong>チーム制作ではリードプログラマを担当した経験があり</strong>、日本ゲーム大賞では、受賞までは届きませんでしたが最終審査を通過することができました。</li>
      <li>リーダーや担当箇所に関わる人などと細かくコミュニケーションを取りながら作業を進め、解釈のズレや進捗の共有をして、<strong>無駄な制作時間を発生させないように注意して制作に取り組むことができます。</strong>
      </li>
    </ul>

  </div>
</div>
</div>

<!-- できること -->
<div class="overlay_Skill" id="skillsSection">
  <div class="overlay__inner">
    <h2 class="overlay__title"><span class="text-gradient">Skill</span></h2>
    <!-- 説明 -->
    <ul class="overlay__description">
      <li><strong>C</strong>、 <strong>C++</strong>、 <strong>C#</strong></li>
      <li><strong>HTML</strong>、 <strong>JavaScript</strong>、 <strong>CSS</strong></li>
      <li><strong>DirectX11</strong>、 <strong>DXライブラリ</strong></li>
      <li><strong>Unity</strong>、 <strong>UnrealEngine</strong></li>
    </ul>
  </div>
</div>

<!-- 制作ゲーム一覧 -->
<div class="overlay_Works" id="gamesSection">
  <div class="overlay__inner">
    <h3 class="overlay__title"><span class="text-gradient">Works</span></h3>
    <!-- 説明 -->
    <ul class="overlay__description">
      <li><strong>ころころダンジョン</strong></li>
      <li><strong>りんご拾い</strong></li>
      <li><strong>エクスプランド</strong></li>
      <li><strong>TURNMARIONETTE</strong></li>
    </ul>
  </div>
  <a href="https://drive.google.com/drive/u/0/folders/16bYCpJqM9Wb_9rvZrQS3DuXXRoUiMW6u"><p id="googlelink">DownLoad Link...</p></a>
</div>



<!-- 賞歴一覧 -->
<div class="overlay_Awords" id="achievementsSection">
  <div class="overlay__inner">
    <h3 class="overlay__title"><span class="text-gradient">Awords</span></h3>
    <!-- 説明 -->
    <ul class="overlay__description">
      <li><strong>ころころダンジョン　HAL Event Week　努力賞</strong></li>
      <li><strong>エクスプランド　HAL Event Week　技術力賞</strong></li>
      <li><strong>TURNMARIONETTE　日本ゲーム大賞　最終審査進出</strong></li>
    </ul>
  </div>
</div>

<table>
  <tr>
    <!-- ナビゲーションボタン -->
    <td>
      <button class="overlay__btn overlay__btn--name">
        <a href="#nameSection">Profile</a>
      </button>
    </td>
    <td>
      <button class="overlay__btn overlay__btn--skills">
        <a href="#skillsSection">Skill</a>
      </button>
    </td>
    <td>
      <button class="overlay__btn overlay__btn--games">
        <a href="#gamesSection">Works</a>
      </button>
    </td>
    <td>
      <button class="overlay__btn overlay__btn--achievements">
        <a href="#achievementsSection">Awords</a>
      </button>
    </td>
  </tr>
</table>

<!--==================================JavaScript====================================-->
<script id="rendered-js" type="module">
  import * as PIXI from "https://cdn.skypack.dev/pixi.js@5.x";
  import { KawaseBlurFilter } from "https://cdn.skypack.dev/@pixi/filter-kawase-blur@3.2.0";
  import SimplexNoise from "https://cdn.skypack.dev/simplex-noise@3.0.0";
  import hsl from "https://cdn.skypack.dev/hsl-to-hex";
  import debounce from "https://cdn.skypack.dev/debounce";




  // 指定された範囲内のランダムな数値を返す関数
  function random(min, max) {
    return Math.random() * (max - min) + min;
  }

  // ある範囲の数値を別の範囲にマッピングする関数
  function map(n, start1, end1, start2, end2) {
    return (n - start1) / (end1 - start1) * (end2 - start2) + start2;
  }


  //====================================色設定=========================================
  // Simplexノイズの新しいインスタンスを作成する
  const simplex = new SimplexNoise();

  // ColorPaletteクラス
  class ColorPalette {
    constructor() {
      this.setColors();
      this.setCustomProperties();
    }

    // 色を設定するメソッド
    setColors() {
      // 220から360の範囲でランダムな色相を選ぶ
      this.hue = ~~random(220, 360);
      this.complimentaryHue1 = this.hue + 30;
      this.complimentaryHue2 = this.hue + 60;
      // 固定された彩度と明度を定義する
      this.saturation = 95;
      this.lightness = 50;

      // ベースカラーを定義する
      this.baseColor = hsl(this.hue, this.saturation, this.lightness);
      // ベースから30度離れた補色を定義する
      this.complimentaryColor1 = hsl(
        this.complimentaryHue1,
        this.saturation,
        this.lightness
      );

      // ベースから60度離れた2番目の補色を定義する
      this.complimentaryColor2 = hsl(
        this.complimentaryHue2,
        this.saturation,
        this.lightness
      );

      // ランダムに選ばれた色を後で使用できるように配列に保存する
      this.colorChoices = [
        this.baseColor,
        this.complimentaryColor1,
        this.complimentaryColor2
      ];
    }

    // ランダムな色を返すメソッド
    randomColor() {
      // ランダムな色を選ぶ
      return this.colorChoices[~~random(0, this.colorChoices.length)].replace(
        "#",
        "0x"
      );
    }

    // カスタムプロパティを設定するメソッド
    setCustomProperties() {
      // ここで定義した色をUI全体で使用できるようにCSSカスタムプロパティを設定する
      document.documentElement.style.setProperty("--hue", this.hue);
      document.documentElement.style.setProperty(
        "--hue-complimentary1",
        this.complimentaryHue1
      );

      document.documentElement.style.setProperty(
        "--hue-complimentary2",
        this.complimentaryHue2
      );
    }
  }


  //====================================背景処理=========================================
  // backOrbクラス
  class backOrb {
    // Pixiは16進数のカラーコードを使うので、fillのデフォルト値を0x000000に設定
    constructor(fill = 0x000000) {
      // orbsが動ける範囲（bounds）を設定する
      this.bounds = this.setBounds();
      // orbの初期の { x, y } 値を設定
      this.x = random(this.bounds["x"].min, this.bounds["x"].max);
      this.y = random(this.bounds["y"].min, this.bounds["y"].max);

      // orbのサイズを初期半径との比率で設定（後で変化する）
      this.scale = 1;

      // orbの色は何色か？
      this.fill = fill;

      // orbの初期半径（ウィンドウの高さに対しての比率でランダムに設定）
      this.radius = random(window.innerHeight / 6, window.innerHeight / 3);

      // ノイズ（自己相似ランダム値）の"時間"の初期値を設定
      this.xOff = random(0, 1000);
      this.yOff = random(0, 1000);
      // ノイズが"時間"を進める速さ
      this.inc = 0.002;

      // PIXI.Graphicsはキャンバスに2Dプリミティブ（この場合は円）を描画するために使用されます
      this.graphics = new PIXI.Graphics();
      this.graphics.alpha = 0.825;

      // ウィンドウのリサイズイベントの最後から250ms後にorbの位置を再計算します
      window.addEventListener(
        "resize",
        debounce(() => {
          this.bounds = this.setBounds();
        }, 250));

    }

    // orbが移動できる範囲（bounds）を設定するメソッド
    setBounds() {
      // { x, y } 原点から各orbが移動できる最大距離
      const maxDist =
        window.innerWidth < 1000 ? window.innerWidth / 3 : window.innerWidth / 5;
      // 各orbの { x, y } 原点（画面の右下）
      const originX = window.innerWidth / 1.25;
      const originY =
        window.innerWidth < 1000 ?
          window.innerHeight :
          window.innerHeight / 1.375;

      // 各orbがx軸またはy軸からどれだけ離れることができるかを許可する
      return {
        x: {
          min: originX - maxDist,
          max: originX + maxDist
        },

        y: {
          min: originY - maxDist,
          max: originY + maxDist
        }
      };
    }

    // orbの位置を更新するメソッド
    update() {
      // 特定の時間での自己相似な「擬似ランダム」またはノイズ値
      const xNoise = simplex.noise2D(this.xOff, this.xOff);
      const yNoise = simplex.noise2D(this.yOff, this.yOff);
      const scaleNoise = simplex.noise2D(this.xOff, this.yOff);

      // xNoise/yNoiseの値（-1から1の範囲）をorbのbounds内のポイントにマップする
      this.x = map(xNoise, -1, 1, this.bounds["x"].min, this.bounds["x"].max);
      this.y = map(yNoise, -1, 1, this.bounds["y"].min, this.bounds["y"].max);
      // scaleNoise（-1から1の範囲）をorbの元のサイズの半分から100%の間のスケール値にマップする
      this.scale = map(scaleNoise, -1, 1, 0.5, 1);

      // 「時間」を進める
      this.xOff += this.inc;
      this.yOff += this.inc;
    }

    // orbを描画するメソッド
    render() {
      // PIXI.Graphicsの位置とスケール値を更新
      this.graphics.x = this.x;
      this.graphics.y = this.y;
      this.graphics.scale.set(this.scale);

      // 現在のgraphicsに描かれているものをクリア
      this.graphics.clear();

      // graphicsに対して、以降に描かれる任意の形状をorbのfill colorで塗りつぶすように指示する
      this.graphics.beginFill(this.fill);
      // { 0, 0 } で円を描く（サイズはthis.radiusで設定）
      this.graphics.drawCircle(0, 0, this.radius);
      // graphicsにこれ以上の形状を塗りつぶさないことを知らせる
      this.graphics.endFill();
    }
  }

  // PixiJSアプリを作成
  const app = new PIXI.Application({
    // <canvas class="backEfect"></canvas>に描画
    view: document.querySelector(".backEfect"),
    // 現在のウィンドウに合わせてサイズを自動調整
    resizeTo: window,
    // 透明な背景。後でCSSを使用してグラデーション背景を作成します
    transparent: true
  });

  // フィルターを追加（ぼかしエフェクト）
  app.stage.filters = [new KawaseBlurFilter(30, 10, true)];

  // カラーパレットを作成
  const colorPalette = new ColorPalette();

  // orbsを作成
  const orbs = [];
  for (let i = 0; i < 10; i++) {
    const orb = new backOrb(colorPalette.randomColor());
    app.stage.addChild(orb.graphics);
    orbs.push(orb);
  }

  // アニメーション
  if (!window.matchMedia("(prefers-reduced-motion: reduce)").matches) {
    app.ticker.add(() => {
      orbs.forEach(orb => {
        orb.update();
        orb.render();
      });
    });
  } else {
    orbs.forEach(orb => {
      orb.update();
      orb.render();
    });
  }
  // 「色をランダムに変更」ボタンがクリックされたときの処理
  // document.querySelector(".overlay__btn--colors").addEventListener("click", () => {
  //   colorPalette.setColors();
  //   colorPalette.setCustomProperties();
  //   orbs.forEach(orb => {
  //     orb.fill = colorPalette.randomColor();
  //   });
  // });





  // ボタンを押した際のスクロール処理
  document.querySelector('.overlay__btn--name').addEventListener('click', function () {
    scrollToElement('nameSection');
  });

  document.querySelector('.overlay__btn--skills').addEventListener('click', function () {
    scrollToElement('skillsSection');
  });

  document.querySelector('.overlay__btn--games').addEventListener('click', function () {
    scrollToElement('gamesSection');
  });

  document.querySelector('.overlay__btn--achievements').addEventListener('click', function () {
    scrollToElement('achievementsSection');
  });

  // 指定の要素までスクロールする関数
  function scrollToElement(id) {
    const element = document.getElementById(id);
    element.scrollIntoView({ behavior: 'smooth' });
  }
</script>
